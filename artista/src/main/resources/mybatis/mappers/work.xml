<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
							"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.mulcam.artista.dao.WorkDAO">
	
	<select id="maxWorkNo" resultType="integer">
		<![CDATA[
			select max(workNo) from work
		]]>
	</select>
	
	<!-- 아티스트 등록신청 내용 insert -->
	<insert id="insertWork" parameterType="work">
		<![CDATA[
			insert into work (workNo, artistNo, artistName, workName, workImg, workType, workTech, 
				workSize, workIntro, workPrice, workForSale, orderNo) 
			values (#{workNo}, #{artistNo}, #{artistName}, #{workName}, #{workImg}, #{workType}, #{workTech}, 
				#{workSize}, #{workIntro}, #{workPrice}, #{workForSale}, #{orderNo})
		]]>
	</insert>
	
	<select id="woriInfo" resultType="Work" parameterType="int">
		<![CDATA[
			select * from work where workNo=#{workNo}
		]]>
	</select>
	
	<select id="getMultiWorkinfo" resultType="Work" parameterType="String">
		<![CDATA[
			select * from work where workNo in (#{workNo})
		]]>
	</select>
	
	<!-- artistNo로 아티스트 일반작품 보기 -->
	<select id="selectWorkByNo" parameterType="int" resultType="work">
		<![CDATA[
			select * from work where artistNo=#{artistNo} and workForSale=0
		]]>
	</select>
	
	<!-- artistNo로 아티스트 판매중인 작품 보기 -->
	<select id="selectProductByNo" parameterType="int" resultType="work">
		<![CDATA[
			select * from work where artistNo=#{artistNo} and workForSale=1
		]]>
	</select>
	
	<!-- artistNo로 아티스트 팬매완료 작품 보기 -->
	<select id="selectSoldProductByNo" parameterType="int" resultType="work">
		<![CDATA[
			select * from work where artistNo=#{artistNo} and workForSale=2
		]]>
	</select>
</mapper>
<!-- 
create table work(
	workNo int(10) not null,
    artistNo int(10) not null,
    artistName varchar(100) not null,
    workName varchar(255) not null,
    workImg varchar(255) not null,
    workType varchar(100) not null,
    workTech varchar(255) not null,
    workSize varchar(255) not null,
    workIntro longtext not null,
    workPrice int(10),
    workForSale boolean not null,
    orderNo int,
    primary key(workNo)
);
 -->